{"ast":null,"code":"var _jsxFileName = \"/home/andre/Desktop/Histop\\xF3lio/histopolio/histopolio-app/client/src/app/pages/Login.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport api from \"../api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login() {\n  _s();\n\n  const [email, setEmail] = useState(\"\");\n  const [emailErrorMessage, setEmailErrorMessage] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [passwordErrorMessage, setPasswordErrorMessage] = useState(\"\");\n  const [alertMessage, setAlertMessage] = useState(\"\");\n\n  const handleClick = () => {\n    let emailError = false;\n    let passwordError = false;\n    setEmailErrorMessage(\"\");\n    setPasswordErrorMessage(\"\");\n    const emailInput = document.getElementById(\"emailInput\");\n    emailInput.style.borderColor = \"#ced4da\";\n    const passwordInput = document.getElementById(\"passwordInput\");\n    passwordInput.style.borderColor = \"#ced4da\"; // email validation\n\n    if (email.length === 0) {\n      emailError = true;\n      setEmailErrorMessage(\"Por favor introduz um email válido.\");\n    } else if (!/\\w*@up.pt/.test(email)) {\n      emailError = true;\n      setEmailErrorMessage(\"Por favor introduz um email válido (formato: utilizador@up.pt).\");\n    }\n\n    if (emailError) {\n      emailInput.style.borderColor = \"red\";\n    } // password validation\n\n\n    if (password.length === 0) {\n      passwordError = true;\n      setPasswordErrorMessage(\"Por favor introduz a tua password.\");\n    }\n\n    if (passwordError) {\n      passwordInput.style.borderColor = \"red\";\n    }\n\n    if (!(emailError || passwordError)) {\n      const payload = {\n        email,\n        password\n      };\n      api.login(payload).then(res => {\n        sessionStorage.setItem(\"user\", JSON.stringify(res.data));\n        window.location.href = \"/\";\n      }).catch(error => {\n        var _error$response, _error$response$data;\n\n        if ((_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && _error$response$data.message) setAlertMessage(error.response.data.message);else setAlertMessage(error.message);\n      });\n    }\n  };\n\n  const handleEmailChange = e => {\n    setEmail(e.target.value);\n  };\n\n  const handlePasswordChange = e => {\n    setPassword(e.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row m-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-sm-12 col-md-8 col-lg-6 mx-auto\",\n      children: [alertMessage.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        role: \"alert\",\n        children: alertMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group row\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"email\",\n          className: \"col-sm-2 col-form-label\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-sm-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            className: \"form-control\",\n            id: \"emailInput\",\n            name: \"email\",\n            onChange: handleEmailChange,\n            value: email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-danger\",\n            children: emailErrorMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group row mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"password\",\n          className: \"col-sm-2 col-form-label\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-sm-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            className: \"form-control\",\n            id: \"passwordInput\",\n            name: \"password\",\n            onChange: handlePasswordChange,\n            value: password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-danger\",\n            children: passwordErrorMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary btn-lg mt-4\",\n          onClick: handleClick,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-4 text-center\",\n        children: [\"N\\xE3o tens uma conta? Regista-te \", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/signup\",\n          children: \"aqui\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 42\n        }, this), \".\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"GEXXWprxPEBlZO7kIjcb5Iqp2dw=\");\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/andre/Desktop/Histopólio/histopolio/histopolio-app/client/src/app/pages/Login.jsx"],"names":["React","useState","Link","api","Login","email","setEmail","emailErrorMessage","setEmailErrorMessage","password","setPassword","passwordErrorMessage","setPasswordErrorMessage","alertMessage","setAlertMessage","handleClick","emailError","passwordError","emailInput","document","getElementById","style","borderColor","passwordInput","length","test","payload","login","then","res","sessionStorage","setItem","JSON","stringify","data","window","location","href","catch","error","response","message","handleEmailChange","e","target","value","handlePasswordChange"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport api from \"../api\";\n\nfunction Login() {\n  const [email, setEmail] = useState(\"\");\n  const [emailErrorMessage, setEmailErrorMessage] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [passwordErrorMessage, setPasswordErrorMessage] = useState(\"\");\n  const [alertMessage, setAlertMessage] = useState(\"\");\n\n  const handleClick = () => {\n    let emailError = false;\n    let passwordError = false;\n\n    setEmailErrorMessage(\"\");\n    setPasswordErrorMessage(\"\");\n\n    const emailInput = document.getElementById(\"emailInput\");\n    emailInput.style.borderColor = \"#ced4da\";\n\n    const passwordInput = document.getElementById(\"passwordInput\");\n    passwordInput.style.borderColor = \"#ced4da\";\n\n    // email validation\n    if (email.length === 0) {\n      emailError = true;\n      setEmailErrorMessage(\"Por favor introduz um email válido.\");\n    } else if (!/\\w*@up.pt/.test(email)) {\n      emailError = true;\n      setEmailErrorMessage(\n        \"Por favor introduz um email válido (formato: utilizador@up.pt).\"\n      );\n    }\n\n    if (emailError) {\n      emailInput.style.borderColor = \"red\";\n    }\n\n    // password validation\n    if (password.length === 0) {\n      passwordError = true;\n      setPasswordErrorMessage(\"Por favor introduz a tua password.\");\n    }\n\n    if (passwordError) {\n      passwordInput.style.borderColor = \"red\";\n    }\n\n    if (!(emailError || passwordError)) {\n      const payload = { email, password };\n\n      api\n        .login(payload)\n        .then((res) => {\n          sessionStorage.setItem(\"user\", JSON.stringify(res.data));\n          window.location.href = \"/\";\n        })\n        .catch((error) => {\n          if (error.response?.data?.message)\n            setAlertMessage(error.response.data.message);\n          else setAlertMessage(error.message);\n        });\n    }\n  };\n\n  const handleEmailChange = (e) => {\n    setEmail(e.target.value);\n  };\n\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value);\n  };\n\n  return (\n    <div className=\"row m-4\">\n      <div className=\"col-sm-12 col-md-8 col-lg-6 mx-auto\">\n        {alertMessage.length > 0 && (\n          <div className=\"alert alert-danger\" role=\"alert\">\n            {alertMessage}\n          </div>\n        )}\n        <div className=\"form-group row\">\n          <label for=\"email\" className=\"col-sm-2 col-form-label\">\n            Email\n          </label>\n          <div className=\"col-sm-10\">\n            <input\n              type=\"email\"\n              className=\"form-control\"\n              id=\"emailInput\"\n              name=\"email\"\n              onChange={handleEmailChange}\n              value={email}\n            />\n            <div className=\"text-danger\">{emailErrorMessage}</div>\n          </div>\n        </div>\n        <div className=\"form-group row mt-3\">\n          <label for=\"password\" className=\"col-sm-2 col-form-label\">\n            Password\n          </label>\n          <div className=\"col-sm-10\">\n            <input\n              type=\"password\"\n              className=\"form-control\"\n              id=\"passwordInput\"\n              name=\"password\"\n              onChange={handlePasswordChange}\n              value={password}\n            />\n            <div className=\"text-danger\">{passwordErrorMessage}</div>\n          </div>\n        </div>\n        <div className=\"text-center\">\n          <button className=\"btn btn-primary btn-lg mt-4\" onClick={handleClick}>\n            Login\n          </button>\n        </div>\n        <p className=\"mt-4 text-center\">\n          Não tens uma conta? Regista-te <Link to=\"/signup\">aqui</Link>.\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}