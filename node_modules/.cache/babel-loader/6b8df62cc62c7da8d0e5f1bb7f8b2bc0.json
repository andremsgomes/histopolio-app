{"ast":null,"code":"var _jsxFileName = \"/home/andre/Desktop/Histop\\xF3lio/histopolio/histopolio-app/client/src/app/context/AuthContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, createContext, useContext } from \"react\";\nimport api from \"../api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\n\nfunction AuthProvider(_ref) {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  async function login(email, password) {\n    setErrorMessage(\"\");\n    const payload = {\n      email,\n      password\n    };\n    await api.login(payload).then(res => {\n      sessionStorage.setItem(\"user\", JSON.stringify(res.data));\n      window.location.href = \"/\";\n    }).catch(error => {\n      var _error$response, _error$response$data;\n\n      if ((_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && _error$response$data.message) setErrorMessage(error.response.data.message);else setErrorMessage(error.message);\n    });\n  }\n\n  async function signup(name, avatar, email, password) {\n    setErrorMessage(\"\");\n    const payload = {\n      name,\n      avatar,\n      email,\n      password\n    };\n    await api.signup(payload).then(res => {\n      sessionStorage.setItem(\"user\", JSON.stringify(res.data));\n    }).catch(error => {\n      var _error$response2, _error$response2$data;\n\n      if ((_error$response2 = error.response) !== null && _error$response2 !== void 0 && (_error$response2$data = _error$response2.data) !== null && _error$response2$data !== void 0 && _error$response2$data.message) setErrorMessage(error.response.data.message);else setErrorMessage(error.message);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      errorMessage,\n      login,\n      signup\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AuthProvider, \"lxcuhsXa5Nyd5poIg+ycrIcH1MU=\");\n\n_c = AuthProvider;\n\nconst useAuth = () => {\n  _s2();\n\n  return useContext(AuthContext);\n};\n\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport default AuthContext;\nexport { AuthProvider, useAuth };\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["/home/andre/Desktop/HistopÃ³lio/histopolio/histopolio-app/client/src/app/context/AuthContext.js"],"names":["React","useState","createContext","useContext","api","AuthContext","AuthProvider","children","errorMessage","setErrorMessage","login","email","password","payload","then","res","sessionStorage","setItem","JSON","stringify","data","window","location","href","catch","error","response","message","signup","name","avatar","useAuth"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,aAA1B,EAAyCC,UAAzC,QAA2D,OAA3D;AAEA,OAAOC,GAAP,MAAgB,QAAhB;;AAEA,MAAMC,WAAW,gBAAGH,aAAa,EAAjC;;AAEA,SAASI,YAAT,OAAoC;AAAA;;AAAA,MAAd;AAAEC,IAAAA;AAAF,GAAc;AAClC,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCR,QAAQ,CAAC,EAAD,CAAhD;;AAEA,iBAAeS,KAAf,CAAqBC,KAArB,EAA4BC,QAA5B,EAAsC;AACpCH,IAAAA,eAAe,CAAC,EAAD,CAAf;AAEA,UAAMI,OAAO,GAAG;AAAEF,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAAhB;AAEA,UAAMR,GAAG,CACNM,KADG,CACGG,OADH,EAEHC,IAFG,CAEGC,GAAD,IAAS;AACbC,MAAAA,cAAc,CAACC,OAAf,CAAuB,MAAvB,EAA+BC,IAAI,CAACC,SAAL,CAAeJ,GAAG,CAACK,IAAnB,CAA/B;AACAC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACD,KALG,EAMHC,KANG,CAMIC,KAAD,IAAW;AAAA;;AAChB,6BAAIA,KAAK,CAACC,QAAV,oEAAI,gBAAgBN,IAApB,iDAAI,qBAAsBO,OAA1B,EACElB,eAAe,CAACgB,KAAK,CAACC,QAAN,CAAeN,IAAf,CAAoBO,OAArB,CAAf,CADF,KAEKlB,eAAe,CAACgB,KAAK,CAACE,OAAP,CAAf;AACN,KAVG,CAAN;AAWD;;AAED,iBAAeC,MAAf,CAAsBC,IAAtB,EAA4BC,MAA5B,EAAoCnB,KAApC,EAA2CC,QAA3C,EAAqD;AACnDH,IAAAA,eAAe,CAAC,EAAD,CAAf;AAEA,UAAMI,OAAO,GAAG;AAAEgB,MAAAA,IAAF;AAAQC,MAAAA,MAAR;AAAgBnB,MAAAA,KAAhB;AAAuBC,MAAAA;AAAvB,KAAhB;AAEA,UAAMR,GAAG,CACNwB,MADG,CACIf,OADJ,EAEHC,IAFG,CAEGC,GAAD,IAAS;AACbC,MAAAA,cAAc,CAACC,OAAf,CAAuB,MAAvB,EAA+BC,IAAI,CAACC,SAAL,CAAeJ,GAAG,CAACK,IAAnB,CAA/B;AACD,KAJG,EAKHI,KALG,CAKIC,KAAD,IAAW;AAAA;;AAChB,8BAAIA,KAAK,CAACC,QAAV,sEAAI,iBAAgBN,IAApB,kDAAI,sBAAsBO,OAA1B,EACElB,eAAe,CAACgB,KAAK,CAACC,QAAN,CAAeN,IAAf,CAAoBO,OAArB,CAAf,CADF,KAEKlB,eAAe,CAACgB,KAAK,CAACE,OAAP,CAAf;AACN,KATG,CAAN;AAUD;;AAED,sBACE,QAAC,WAAD,CAAa,QAAb;AACE,IAAA,KAAK,EAAE;AACLnB,MAAAA,YADK;AAELE,MAAAA,KAFK;AAGLkB,MAAAA;AAHK,KADT;AAAA,cAOGrB;AAPH;AAAA;AAAA;AAAA;AAAA,UADF;AAWD;;GAjDQD,Y;;KAAAA,Y;;AAmDT,MAAMyB,OAAO,GAAG;AAAA;;AAAA,SAAM5B,UAAU,CAACE,WAAD,CAAhB;AAAA,CAAhB;;IAAM0B,O;;AAEN,eAAe1B,WAAf;AAEA,SAASC,YAAT,EAAuByB,OAAvB","sourcesContent":["import React, { useState, createContext, useContext } from \"react\";\n\nimport api from \"../api\";\n\nconst AuthContext = createContext();\n\nfunction AuthProvider({ children }) {\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  async function login(email, password) {\n    setErrorMessage(\"\");\n\n    const payload = { email, password };\n\n    await api\n      .login(payload)\n      .then((res) => {\n        sessionStorage.setItem(\"user\", JSON.stringify(res.data));\n        window.location.href = \"/\";\n      })\n      .catch((error) => {\n        if (error.response?.data?.message)\n          setErrorMessage(error.response.data.message);\n        else setErrorMessage(error.message);\n      });\n  }\n\n  async function signup(name, avatar, email, password) {\n    setErrorMessage(\"\");\n\n    const payload = { name, avatar, email, password };\n\n    await api\n      .signup(payload)\n      .then((res) => {\n        sessionStorage.setItem(\"user\", JSON.stringify(res.data));\n      })\n      .catch((error) => {\n        if (error.response?.data?.message)\n          setErrorMessage(error.response.data.message);\n        else setErrorMessage(error.message);\n      });\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{\n        errorMessage,\n        login,\n        signup,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nconst useAuth = () => useContext(AuthContext);\n\nexport default AuthContext;\n\nexport { AuthProvider, useAuth };\n"]},"metadata":{},"sourceType":"module"}